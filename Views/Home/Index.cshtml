@model HelpFast_Pim.Models.Usuario
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    var nome = Model?.Nome ?? "Usuário";
    var cargoId = Model?.CargoId ?? 0;
}

<style>
    html, body {
        background: #0f1b23 !important;
    }
    .app-root, .app-content {
        background: #0f1b23 !important;
    }
    
    /* Logout button - posicionado no canto superior direito */
    .logout-btn {
        position: fixed; top: 20px; right: 20px; background: #fff; color: #000; 
        padding: 10px 20px; border-radius: 8px; text-decoration: none; font-weight: 600; 
        font-size: 14px; border: none; cursor: pointer; transition: all 0.2s ease; z-index: 1000;
    }
    .logout-btn:hover { background: #f0f0f0; transform: scale(1.05); }
    
    @@media (max-width: 760px) {
        .logout-btn { top: 10px; right: 10px; padding: 8px 16px; font-size: 12px; }
    }
</style>

<div class="card" style="width:420px;">
    <form id="logout-form" action="/Account/Logout" method="post" style="display:none;">
        @Html.AntiForgeryToken()
    </form>
    <button id="logout-btn" class="logout-btn" title="Sair">Sair</button>
    <div class="card-inner" style="text-align:center;padding:36px 28px;">
        <div class="logo-wrap" style="margin-bottom:18px;">
            <img src="/images/logoh.png" alt="HelpFast" />
        </div>

        <h2 style="margin:8px 0 22px;font-weight:500;font-size:22px;">Olá @nome</h2>

        @if (cargoId == 3) {
            <!-- Cliente -->
            <div style="display:flex;flex-direction:column;gap:18px;padding:12px 28px;">
                <a asp-controller="Chamados" asp-action="Create" class="btn primary" style="padding:12px;border-radius:12px;">Solicitar Chamado</a>
                <a asp-controller="Chamados" asp-action="MeusChamados" class="btn secondary small" style="padding:12px;border-radius:12px;">Meus Chamados</a>
            </div>
        } else if (cargoId == 1) {
            <!-- Administrador -->
            <div style="display:flex;flex-direction:column;gap:18px;padding:12px 28px;">
                <a asp-controller="Chamados" asp-action="ChamadosAdmin" class="btn secondary small" style="padding:12px;border-radius:12px;">Visualizar chamados</a>
                <a asp-controller="Usuarios" asp-action="Gerenciar" class="btn secondary small" style="padding:12px;border-radius:12px;">Gerenciar Usuários</a>
            </div>
        } else {
            <!-- Técnico (default) -->
            <div style="display:flex;flex-direction:column;gap:18px;padding:12px 28px;">
                <a href="/Chamados/ConsultarChamados" class="btn secondary small" style="padding:12px;border-radius:12px;">Consultar chamados</a>
            </div>
        }
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function(){
        const logoutBtn = document.getElementById('logout-btn');
        if (logoutBtn) {
            logoutBtn.addEventListener('click', function() {
                const form = document.getElementById('logout-form');
                if (form) {
                    form.submit();
                }
            });
        }
    });
</script>
